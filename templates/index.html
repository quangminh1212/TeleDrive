<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeleDrive File Manager</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Segoe+UI:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- Windows Explorer Style Title Bar -->
    <div class="explorer-title-bar">
        <div class="title-bar-left">
            <div class="app-icon">
                <img src="{{ url_for('static', filename='images/logo.png') }}" alt="TeleDrive" class="app-icon-img">
            </div>
            <span class="window-title">TeleDrive - File Manager</span>
        </div>
        <div class="title-bar-right">
            {% if user %}
                <div class="user-info">
                    <i class="icon icon-user"></i>
                    <span class="username">{{ user.username or 'No username' }}</span>
                    {% if user.is_admin %}
                        <div class="admin-menu-container">
                            <button class="admin-badge-btn" id="adminMenuToggle" title="Cài đặt Admin">
                                <span class="admin-badge">Admin</span>
                                <i class="icon icon-chevron-down"></i>
                            </button>
                            <div class="admin-dropdown-menu" id="adminDropdownMenu">
                                <div class="admin-menu-header">
                                    <i class="icon icon-settings"></i>
                                    <span>Quản lý hệ thống</span>
                                </div>
                                <div class="admin-menu-divider"></div>
                                <button class="admin-menu-item" id="userManagementBtn">
                                    <i class="icon icon-user"></i>
                                    <span>Quản lý người dùng</span>
                                </button>
                                <button class="admin-menu-item" id="systemSettingsBtn">
                                    <i class="icon icon-settings"></i>
                                    <span>Cài đặt hệ thống</span>
                                </button>
                                <button class="admin-menu-item" id="scanSettingsBtn">
                                    <i class="icon icon-scan"></i>
                                    <span>Cài đặt Telegram</span>
                                </button>
                                <button class="admin-menu-item" id="logsViewBtn">
                                    <i class="icon icon-file-text"></i>
                                    <span>Xem logs</span>
                                </button>
                                <div class="admin-menu-divider"></div>
                                <button class="admin-menu-item" id="profileSettingsBtn">
                                    <i class="icon icon-user"></i>
                                    <span>Thông tin tài khoản</span>
                                </button>
                            </div>
                        </div>
                    {% endif %}
                    <button class="logout-btn" id="logoutBtn" title="Đăng xuất">
                        <i class="icon icon-sign-out"></i>
                        <span>Đăng xuất</span>
                    </button>
                </div>
            {% else %}
                <div class="user-info">
                    <span style="color: red;">No user object found</span>
                    <button class="logout-btn" id="logoutBtn" title="Đăng xuất">
                        <i class="icon icon-sign-out"></i>
                        <span>Đăng xuất</span>
                    </button>
                </div>
            {% endif %}
            <div class="window-controls">
                <button class="window-control minimize" title="Minimize">
                    <i class="icon icon-minus"></i>
                </button>
                <button class="window-control maximize" title="Maximize">
                    <i class="icon icon-square"></i>
                </button>
                <button class="window-control close" title="Close">
                    <i class="icon icon-times"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Windows Explorer Style Ribbon Toolbar -->
    <div class="explorer-ribbon">
        <div class="ribbon-tabs">
            <button class="ribbon-tab active" data-tab="home">Home</button>
            <button class="ribbon-tab" data-tab="share">Share</button>
            <button class="ribbon-tab" data-tab="view">View</button>
        </div>

        <div class="ribbon-content">
            <!-- Home Tab -->
            <div class="ribbon-panel active" id="homePanel">
                <div class="ribbon-group">
                    <div class="ribbon-group-header">Clipboard</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn large" id="pasteBtn" title="Paste" disabled>
                            <i class="icon icon-paste"></i>
                            <span>Paste</span>
                        </button>
                        <div class="ribbon-btn-group">
                            <button class="ribbon-btn" id="cutBtn" title="Cut" disabled>
                                <i class="icon icon-cut"></i>
                                <span>Cut</span>
                            </button>
                            <button class="ribbon-btn" id="copyBtn" title="Copy" disabled>
                                <i class="icon icon-copy"></i>
                                <span>Copy</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="ribbon-group">
                    <div class="ribbon-group-header">Organize</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn large" id="moveBtn" title="Move to" disabled>
                            <i class="icon icon-move"></i>
                            <span>Move to</span>
                        </button>
                        <button class="ribbon-btn large" id="copyToBtn" title="Copy to" disabled>
                            <i class="icon icon-copy-to"></i>
                            <span>Copy to</span>
                        </button>
                        <button class="ribbon-btn large" id="deleteBtn" title="Delete" disabled>
                            <i class="icon icon-trash"></i>
                            <span>Delete</span>
                        </button>
                        <button class="ribbon-btn large" id="renameBtn" title="Rename" disabled>
                            <i class="icon icon-edit"></i>
                            <span>Rename</span>
                        </button>
                    </div>
                </div>

                <div class="ribbon-group">
                    <div class="ribbon-group-header">New</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn large" id="newFolderBtn" title="New folder">
                            <i class="icon icon-folder-plus"></i>
                            <span>New folder</span>
                        </button>
                    </div>
                </div>

                <div class="ribbon-group">
                    <div class="ribbon-group-header">Open</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn large" id="propertiesBtn" title="Properties" disabled>
                            <i class="icon icon-info"></i>
                            <span>Properties</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Share Tab -->
            <div class="ribbon-panel" id="sharePanel">
                <div class="ribbon-group">
                    <div class="ribbon-group-header">Send</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn large" id="shareBtn" title="Share" disabled>
                            <i class="icon icon-share"></i>
                            <span>Share</span>
                        </button>
                        <button class="ribbon-btn large" id="emailBtn" title="Email" disabled>
                            <i class="icon icon-email"></i>
                            <span>Email</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- View Tab -->
            <div class="ribbon-panel" id="viewPanel">
                <div class="ribbon-group">
                    <div class="ribbon-group-header">Layout</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn view-btn active" data-view="icons" title="Large icons">
                            <i class="icon icon-view-grid"></i>
                            <span>Large icons</span>
                        </button>
                        <button class="ribbon-btn view-btn" data-view="list" title="List">
                            <i class="icon icon-view-list"></i>
                            <span>List</span>
                        </button>
                        <button class="ribbon-btn view-btn" data-view="details" title="Details">
                            <i class="icon icon-view-details"></i>
                            <span>Details</span>
                        </button>
                    </div>
                </div>

                <div class="ribbon-group">
                    <div class="ribbon-group-header">Current view</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn" id="sortBtn" title="Sort by">
                            <i class="icon icon-sort"></i>
                            <span>Sort by</span>
                        </button>
                        <button class="ribbon-btn" id="groupBtn" title="Group by">
                            <i class="icon icon-group"></i>
                            <span>Group by</span>
                        </button>
                    </div>
                </div>

                <div class="ribbon-group">
                    <div class="ribbon-group-header">Show/hide</div>
                    <div class="ribbon-buttons">
                        <button class="ribbon-btn" id="detailsPaneBtn" title="Details pane">
                            <i class="icon icon-panel-right"></i>
                            <span>Details pane</span>
                        </button>
                        <button class="ribbon-btn" id="previewPaneBtn" title="Preview pane">
                            <i class="icon icon-preview"></i>
                            <span>Preview pane</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- TeleDrive Navigation Pane -->
        <aside class="navigation-pane" id="navigationPane">
            <!-- Quick Access Section -->
            <div class="nav-section">
                <div class="nav-section-header">
                    <button class="section-toggle expanded" data-section="quick-access">
                        <i class="icon icon-chevron-down"></i>
                    </button>
                    <span class="section-title">Quick access</span>
                </div>
                <div class="nav-section-content" id="quickAccessContent">
                    <div class="nav-item active" data-path="home">
                        <i class="icon icon-cloud"></i>
                        <span>TeleDrive Home</span>
                    </div>
                    <div class="nav-item" data-path="recent">
                        <i class="icon icon-refresh"></i>
                        <span>Recent files</span>
                    </div>
                    <div class="nav-item" data-path="shared">
                        <i class="icon icon-share"></i>
                        <span>Shared with me</span>
                    </div>
                    <div class="nav-item" data-path="favorites">
                        <i class="icon icon-star"></i>
                        <span>Favorites</span>
                    </div>
                </div>
            </div>

            <!-- My Scans Section -->
            <div class="nav-section">
                <div class="nav-section-header">
                    <button class="section-toggle expanded" data-section="my-scans">
                        <i class="icon icon-chevron-down"></i>
                    </button>
                    <span class="section-title">My Scans</span>
                </div>
                <div class="nav-section-content" id="myScansContent">
                    <div class="nav-item" data-path="all-scans">
                        <i class="icon icon-folder"></i>
                        <span>All scans</span>
                    </div>
                    <div class="nav-item" data-path="documents">
                        <i class="icon icon-file-text"></i>
                        <span>Documents</span>
                    </div>
                    <div class="nav-item" data-path="images">
                        <i class="icon icon-image"></i>
                        <span>Images</span>
                    </div>
                    <div class="nav-item" data-path="videos">
                        <i class="icon icon-video"></i>
                        <span>Videos</span>
                    </div>
                    <div class="nav-item" data-path="archives">
                        <i class="icon icon-archive"></i>
                        <span>Archives</span>
                    </div>
                </div>
            </div>

            <!-- Telegram Sessions Section -->
            <div class="nav-section">
                <div class="nav-section-header">
                    <button class="section-toggle expanded" data-section="sessions">
                        <i class="icon icon-chevron-down"></i>
                    </button>
                    <span class="section-title">Telegram Sessions</span>
                </div>
                <div class="nav-section-content" id="sessionsList">
                    <div class="loading">
                        <i class="icon icon-spinner"></i>
                        <span>Loading sessions...</span>
                    </div>
                </div>
            </div>

            <!-- Storage Section -->
            <div class="nav-section">
                <div class="nav-section-header">
                    <button class="section-toggle collapsed" data-section="storage">
                        <i class="icon icon-chevron-right"></i>
                    </button>
                    <span class="section-title">Storage</span>
                </div>
                <div class="nav-section-content" id="storageContent" style="display: none;">
                    <div class="nav-item" data-path="trash">
                        <i class="icon icon-trash"></i>
                        <span>Trash</span>
                    </div>
                    <div class="nav-item" data-path="settings">
                        <i class="icon icon-settings"></i>
                        <span>Settings</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Windows Explorer Style Navigation Bar -->
            <div class="explorer-navigation-bar">
                <!-- Navigation Controls -->
                <div class="nav-controls">
                    <button id="backBtn" class="nav-btn" title="Back" disabled>
                        <i class="icon icon-arrow-left"></i>
                    </button>
                    <button id="forwardBtn" class="nav-btn" title="Forward" disabled>
                        <i class="icon icon-arrow-right"></i>
                    </button>
                    <button id="upBtn" class="nav-btn" title="Up">
                        <i class="icon icon-arrow-up"></i>
                    </button>
                </div>

                <!-- Address Bar Container -->
                <div class="address-bar-container">
                    <div class="address-bar" id="addressBar">
                        <!-- Breadcrumb Navigation -->
                        <div class="breadcrumb-navigation" id="breadcrumbNav">
                            <button class="breadcrumb-item" data-path="home">
                                <i class="icon icon-cloud"></i>
                                <span>TeleDrive</span>
                            </button>
                            <i class="icon icon-chevron-right breadcrumb-separator"></i>
                            <button class="breadcrumb-item active" data-path="home">
                                <i class="icon icon-folder"></i>
                                <span>Home</span>
                            </button>
                        </div>
                        <!-- Editable Address Input -->
                        <input type="text" id="addressInput" class="address-input" style="display: none;" placeholder="Type a path">
                    </div>
                    <button class="address-dropdown-btn" id="addressDropdownBtn" title="Recent locations">
                        <i class="icon icon-chevron-down"></i>
                    </button>
                </div>

                <!-- Search Box -->
                <div class="search-container">
                    <div class="search-box">
                        <i class="icon icon-search"></i>
                        <input type="text" id="searchInput" placeholder="Search files and folders">
                        <button id="clearSearch" class="clear-search-btn" style="display: none;">
                            <i class="icon icon-times"></i>
                        </button>
                    </div>
                </div>
            </div>



            <!-- Content Area -->
            <div class="content-area">
                <!-- Welcome Screen -->
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-content">
                        <i class="icon icon-cloud welcome-icon"></i>
                        <h2>Welcome to TeleDrive</h2>
                        <p>Your cloud storage for Telegram files. Select a session from the sidebar to browse your scanned files, or start a new scan to discover files from your Telegram chats.</p>

                        <!-- Recent Scan Section -->
                        <div class="recent-scan-section" id="recentScanSection" style="display: none;">
                            <h3>📊 Lượt scan gần nhất</h3>
                            <div class="recent-scan-card" id="recentScanCard">
                                <div class="scan-info">
                                    <div class="scan-header">
                                        <span class="scan-name" id="recentScanName">Loading...</span>
                                        <span class="scan-date" id="recentScanDate">Loading...</span>
                                    </div>
                                    <div class="scan-stats">
                                        <div class="stat-item">
                                            <i class="icon icon-file"></i>
                                            <span id="recentScanFiles">0</span> files
                                        </div>
                                        <div class="stat-item">
                                            <i class="icon icon-hdd"></i>
                                            <span id="recentScanSize">0 MB</span>
                                        </div>
                                        <div class="stat-item">
                                            <i class="icon icon-user"></i>
                                            <span id="recentScanChats">0</span> chats
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-secondary view-scan-btn" id="viewRecentScanBtn">
                                    <i class="icon icon-eye"></i>
                                    Xem files
                                </button>
                            </div>
                        </div>

                        <!-- No Scans Message -->
                        <div class="no-scans-message" id="noScansMessage">
                            <i class="icon icon-scan"></i>
                            <p>Chưa có lượt scan nào. Hãy bắt đầu scan đầu tiên để khám phá files từ Telegram của bạn!</p>
                        </div>

                        <!-- Action Buttons -->
                        <div class="welcome-actions">
                            <button class="btn btn-primary start-scan-btn" id="startScanBtn">
                                <i class="icon icon-scan"></i>
                                Bắt đầu scan mới
                            </button>
                            <button class="btn btn-secondary manage-sessions-btn" id="manageSessionsBtn">
                                <i class="icon icon-settings"></i>
                                Quản lý sessions
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Google Drive Layout Container -->
                <div class="gdrive-layout" id="gdriveLayout" style="display: none; flex: 1; height: calc(100vh - 120px);">
                    <div style="display: flex; height: 100%;">
                        <!-- Google Drive Sidebar -->
                        <div class="gdrive-sidebar" id="gdriveSidebar" style="width: 256px; background: #fff; border-right: 1px solid #e8eaed; flex-shrink: 0;">
                            <div style="padding: 16px;">
                                <button class="gdrive-btn-primary" id="sidebarNewBtn" style="width: 100%; justify-content: flex-start; border-radius: 24px; padding: 12px 24px; font-weight: 500; box-shadow: 0 1px 3px rgba(60, 64, 67, 0.3);">
                                    <i class="icon icon-plus" style="margin-right: 12px;"></i>
                                    New
                                </button>
                            </div>

                            <div style="padding: 0 8px;">
                                <div class="gdrive-sidebar-item active" style="display: flex; align-items: center; padding: 8px 16px; border-radius: 0 24px 24px 0; background: #e8f0fe; color: #1a73e8; margin-bottom: 4px; cursor: pointer;">
                                    <i class="icon icon-folder" style="margin-right: 12px; font-size: 20px;"></i>
                                    <span>My Drive</span>
                                </div>

                                <div class="gdrive-sidebar-item" style="display: flex; align-items: center; padding: 8px 16px; border-radius: 0 24px 24px 0; color: #5f6368; margin-bottom: 4px; cursor: pointer;">
                                    <i class="icon icon-users" style="margin-right: 12px; font-size: 20px;"></i>
                                    <span>Shared with me</span>
                                </div>

                                <div class="gdrive-sidebar-item" style="display: flex; align-items: center; padding: 8px 16px; border-radius: 0 24px 24px 0; color: #5f6368; margin-bottom: 4px; cursor: pointer;">
                                    <i class="icon icon-clock" style="margin-right: 12px; font-size: 20px;"></i>
                                    <span>Recent</span>
                                </div>

                                <div class="gdrive-sidebar-item" style="display: flex; align-items: center; padding: 8px 16px; border-radius: 0 24px 24px 0; color: #5f6368; margin-bottom: 4px; cursor: pointer;">
                                    <i class="icon icon-star" style="margin-right: 12px; font-size: 20px;"></i>
                                    <span>Starred</span>
                                </div>

                                <div class="gdrive-sidebar-item" style="display: flex; align-items: center; padding: 8px 16px; border-radius: 0 24px 24px 0; color: #5f6368; margin-bottom: 4px; cursor: pointer;">
                                    <i class="icon icon-trash" style="margin-right: 12px; font-size: 20px;"></i>
                                    <span>Trash</span>
                                </div>
                            </div>

                            <div style="padding: 16px; border-top: 1px solid #e8eaed; margin-top: 16px;">
                                <div style="font-size: 12px; color: #5f6368; margin-bottom: 8px;">Storage</div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="flex: 1; height: 4px; background: #e8eaed; border-radius: 2px; overflow: hidden;">
                                        <div style="width: 30%; height: 100%; background: #1a73e8;"></div>
                                    </div>
                                </div>
                                <div style="font-size: 12px; color: #5f6368; margin-top: 4px;">3.2 GB of 15 GB used</div>
                            </div>
                        </div>

                        <!-- Main Content Area -->
                        <div style="flex: 1; display: flex; flex-direction: column;">
                            <!-- Google Drive Style Toolbar -->
                <div class="gdrive-toolbar" id="gdriveToolbar" style="display: none;">
                    <div class="gdrive-toolbar-left">
                        <button class="gdrive-btn-primary" id="newBtn" style="border-radius: 24px; padding: 12px 24px; font-weight: 500;">
                            <i class="icon icon-plus"></i>
                            New
                        </button>
                    </div>
                    <div class="gdrive-toolbar-right">
                        <div class="gdrive-search-box">
                            <i class="icon icon-search gdrive-search-icon" style="color: #5f6368; font-size: 20px;"></i>
                            <input type="text" class="gdrive-search-input" placeholder="Search in Drive" id="gdriveSearchInput">
                            <button class="gdrive-search-filter-btn" id="searchFilterBtn" title="Search options">
                                <i class="icon icon-tune" style="font-size: 20px;"></i>
                            </button>
                        </div>
                        <div class="gdrive-view-toggle" style="background: transparent; padding: 0; gap: 4px;">
                            <button class="gdrive-view-btn active" data-view="grid" title="Grid view" style="width: 40px; height: 40px; border-radius: 50%; background: transparent; border: none; display: flex; align-items: center; justify-content: center;">
                                <i class="icon icon-grid" style="font-size: 20px;"></i>
                            </button>
                            <button class="gdrive-view-btn" data-view="list" title="List view" style="width: 40px; height: 40px; border-radius: 50%; background: transparent; border: none; display: flex; align-items: center; justify-content: center;">
                                <i class="icon icon-list" style="font-size: 20px;"></i>
                            </button>
                        </div>
                        <button class="gdrive-btn-ghost" id="settingsBtn" style="width: 40px; height: 40px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center;">
                            <i class="icon icon-settings" style="font-size: 20px;"></i>
                        </button>
                        <button class="gdrive-btn-ghost" id="toggleInterfaceBtn" title="Switch to Classic View" style="width: 40px; height: 40px; border-radius: 50%; padding: 0; display: flex; align-items: center; justify-content: center;">
                            <i class="icon icon-layout" style="font-size: 20px;"></i>
                        </button>
                    </div>
                </div>

                <!-- Google Drive Breadcrumb -->
                <div class="gdrive-breadcrumb" id="gdriveBreadcrumb" style="display: none; padding: 12px 24px; background: #fff; border-bottom: 1px solid #e8eaed;">
                    <div class="gdrive-breadcrumb-item current" style="color: #202124; font-size: 22px; font-weight: 400; display: flex; align-items: center; gap: 8px;">
                        <i class="icon icon-folder" style="font-size: 24px; color: #1a73e8;"></i>
                        <span>My Drive</span>
                    </div>
                </div>

                <!-- Selection Info and Bulk Operations -->
                <div class="gdrive-bulk-toolbar" id="gdriveBulkToolbar" style="display: none;">
                    <div class="gdrive-bulk-info">
                        <span class="selection-count">0 items selected</span>
                    </div>
                    <div class="gdrive-bulk-actions">
                        <button class="gdrive-btn-ghost" id="bulkDownloadBtn">
                            <i class="icon icon-download"></i>
                            Download
                        </button>
                        <button class="gdrive-btn-ghost" id="bulkShareBtn">
                            <i class="icon icon-share"></i>
                            Share
                        </button>
                        <button class="gdrive-btn-ghost" id="bulkStarBtn">
                            <i class="icon icon-star"></i>
                            Star
                        </button>
                        <button class="gdrive-btn-ghost" id="bulkMoveBtn">
                            <i class="icon icon-move"></i>
                            Move
                        </button>
                        <button class="gdrive-btn-ghost" id="bulkDeleteBtn">
                            <i class="icon icon-trash"></i>
                            Delete
                        </button>
                        <button class="gdrive-btn-ghost" id="clearSelectionBtn">
                            <i class="icon icon-times"></i>
                            Clear
                        </button>
                    </div>
                </div>

                            <!-- Google Drive Files Display -->
                            <div class="gdrive-files-display gdrive-grid-view" id="gdriveFilesDisplay" style="flex: 1; overflow-y: auto;">
                                <!-- Files will be loaded here -->
                            </div>

                <!-- Files Container -->
                <div class="files-container" id="filesContainer" style="display: none;">
                    <!-- List View Header (only visible in list/details view) -->
                    <div class="list-header" id="listHeader" style="display: none;">
                        <div class="header-cell name-header" data-sort="name">
                            <span>Tên</span>
                            <i class="icon icon-sort sort-indicator"></i>
                        </div>
                        <div class="header-cell date-header" data-sort="modified">
                            <span>Ngày sửa đổi</span>
                            <i class="icon icon-sort sort-indicator"></i>
                        </div>
                        <div class="header-cell type-header" data-sort="type">
                            <span>Loại</span>
                            <i class="icon icon-sort sort-indicator"></i>
                        </div>
                        <div class="header-cell size-header" data-sort="size">
                            <span>Kích cỡ</span>
                            <i class="icon icon-sort sort-indicator"></i>
                        </div>
                    </div>

                    <!-- Files Display Area -->
                    <div class="files-display" id="filesDisplay">
                        <!-- Files will be loaded here -->
                    </div>

                    <!-- Pagination -->
                    <div class="pagination" id="pagination" style="display: none;">
                        <button id="prevPage" class="page-btn">
                            <i class="icon icon-chevron-left"></i>
                        </button>
                        <span id="pageInfo">Trang 1 / 1</span>
                        <button id="nextPage" class="page-btn">
                            <i class="icon icon-chevron-right"></i>
                        </button>
                    </div>
                </div>

                            <!-- Loading -->
                            <div class="loading-screen" id="loadingScreen" style="display: none;">
                                <div class="loading">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Đang tải file...</span>
                                </div>
                            </div>
                        </div> <!-- End Main Content Area -->
                    </div> <!-- End Flex Container -->
                </div> <!-- End Google Drive Layout -->

                <!-- No Results -->
                <div class="no-results" id="noResults" style="display: none;">
                    <i class="fas fa-search"></i>
                    <h3>Không tìm thấy file nào</h3>
                    <p>Thử thay đổi từ khóa tìm kiếm hoặc bộ lọc</p>
                </div>
            </div>
        </main>

        <!-- Windows Explorer Style Details Pane -->
        <aside class="details-pane" id="detailsPane" style="display: none;">
            <div class="details-header">
                <h3>Details</h3>
                <button class="details-close" id="detailsPaneClose" title="Close details pane">
                    <i class="icon icon-times"></i>
                </button>
            </div>

            <div class="details-content" id="detailsContent">
                <div class="no-selection">
                    <i class="icon icon-info"></i>
                    <p>Select an item to view its details</p>
                </div>
            </div>
        </aside>
    </div>

    <!-- File Detail Modal -->
    <div class="modal" id="fileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Chi tiết file</h3>
                <button class="modal-close" id="modalClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="modal-body" id="modalBody">
                <!-- File details will be loaded here -->
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" id="modalCloseBtn">Đóng</button>
                <button class="btn btn-primary" id="downloadBtn">
                    <i class="fas fa-download"></i>
                    Tải xuống
                </button>
            </div>
        </div>
    </div>

    <!-- File Preview Modal -->
    <div id="previewModal" class="modal preview-modal">
        <div class="modal-content preview-content">
            <div class="modal-header">
                <h3 id="previewTitle">Xem trước file</h3>
                <div class="preview-actions">
                    <button id="previewDownloadBtn" class="btn btn-primary">
                        <i class="fas fa-download"></i>
                        Tải xuống
                    </button>
                    <button class="modal-close" id="previewClose">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body preview-body">
                <div id="previewContent" class="preview-content-area">
                    <!-- Preview content will be populated by JavaScript -->
                </div>
                <div id="previewInfo" class="preview-info">
                    <!-- File info will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Windows Explorer Style Status Bar -->
    <div class="explorer-status-bar">
        <div class="status-left">
            <span id="itemCount">0 items</span>
            <span id="selectedCount" style="display: none;"> • 0 items selected</span>
        </div>
        <div class="status-center">
            <div class="status-progress" id="statusProgress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">Loading...</span>
            </div>
        </div>
        <div class="status-right">
            <div class="view-controls">
                <button class="view-control-btn" id="zoomOutBtn" title="Zoom out">
                    <i class="icon icon-minus"></i>
                </button>
                <div class="zoom-slider-container">
                    <input type="range" class="zoom-slider" id="zoomSlider" min="0" max="4" value="2" step="1">
                </div>
                <button class="view-control-btn" id="zoomInBtn" title="Zoom in">
                    <i class="icon icon-plus"></i>
                </button>
                <div class="view-mode-controls">
                    <div class="view-dropdown">
                        <button class="view-mode-btn dropdown-toggle active" id="viewModeBtn" data-view="icons" title="View options">
                            <i class="icon icon-view-grid"></i>
                            <i class="icon icon-chevron-down"></i>
                        </button>
                        <div class="view-dropdown-menu" id="viewDropdownMenu">
                            <div class="view-section">
                                <div class="view-section-title">Biểu tượng</div>
                                <button class="view-option" data-view="extra-large-icons">
                                    <i class="icon icon-grid-xl"></i>
                                    <span>Biểu tượng Rất lớn</span>
                                </button>
                                <button class="view-option" data-view="large-icons">
                                    <i class="icon icon-grid-lg"></i>
                                    <span>Biểu tượng Lớn</span>
                                </button>
                                <button class="view-option active" data-view="medium-icons">
                                    <i class="icon icon-view-grid"></i>
                                    <span>Biểu tượng Trung bình</span>
                                </button>
                                <button class="view-option" data-view="small-icons">
                                    <i class="icon icon-grid-sm"></i>
                                    <span>Biểu tượng Nhỏ</span>
                                </button>
                            </div>
                            <div class="view-section">
                                <div class="view-section-title">Danh sách</div>
                                <button class="view-option" data-view="list">
                                    <i class="icon icon-view-list"></i>
                                    <span>Danh sách</span>
                                </button>
                                <button class="view-option" data-view="details">
                                    <i class="icon icon-view-details"></i>
                                    <span>Chi tiết</span>
                                </button>
                                <button class="view-option" data-view="tiles">
                                    <i class="icon icon-tiles"></i>
                                    <span>Lát</span>
                                </button>
                                <button class="view-option" data-view="content">
                                    <i class="icon icon-content"></i>
                                    <span>Nội dung</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Google Drive Context Menu -->
    <div class="gdrive-context-menu" id="gdriveContextMenu">
        <button class="gdrive-context-item" data-action="open">
            <i class="icon icon-eye"></i>
            <span>Open</span>
        </button>
        <button class="gdrive-context-item" data-action="download">
            <i class="icon icon-download"></i>
            <span>Download</span>
        </button>
        <div class="gdrive-context-divider"></div>
        <button class="gdrive-context-item" data-action="rename">
            <i class="icon icon-edit"></i>
            <span>Rename</span>
        </button>
        <button class="gdrive-context-item" data-action="copy">
            <i class="icon icon-copy"></i>
            <span>Make a copy</span>
        </button>
        <button class="gdrive-context-item" data-action="move">
            <i class="icon icon-move"></i>
            <span>Move to</span>
        </button>
        <div class="gdrive-context-divider"></div>
        <button class="gdrive-context-item" data-action="share">
            <i class="icon icon-share"></i>
            <span>Share</span>
        </button>
        <button class="gdrive-context-item" data-action="star">
            <i class="icon icon-star"></i>
            <span>Add to starred</span>
        </button>
        <div class="gdrive-context-divider"></div>
        <button class="gdrive-context-item" data-action="delete">
            <i class="icon icon-trash"></i>
            <span>Remove</span>
        </button>
    </div>

    <!-- Google Drive Modal -->
    <div class="gdrive-modal" id="gdriveModal">
        <div class="gdrive-modal-content">
            <div class="gdrive-modal-header">
                <h2 class="gdrive-modal-title" id="gdriveModalTitle">Modal Title</h2>
                <button class="gdrive-modal-close" id="gdriveModalClose">
                    <i class="icon icon-times"></i>
                </button>
            </div>
            <div class="gdrive-modal-body" id="gdriveModalBody">
                <!-- Modal content will be inserted here -->
            </div>
        </div>
    </div>

    <!-- File Upload Progress -->
    <div class="gdrive-upload-progress" id="gdriveUploadProgress" style="display: none;">
        <h4>Uploading files</h4>
        <div id="uploadProgressList">
            <!-- Upload progress items will be added here -->
        </div>
    </div>

    <!-- Search Filter Dropdown -->
    <div class="gdrive-search-filters" id="gdriveSearchFilters" style="display: none;">
        <div class="gdrive-filter-section">
            <label class="gdrive-filter-label">File Type</label>
            <select class="gdrive-filter-select" id="fileTypeFilter">
                <option value="">All types</option>
                <option value="image">Images</option>
                <option value="video">Videos</option>
                <option value="audio">Audio</option>
                <option value="document">Documents</option>
                <option value="archive">Archives</option>
                <option value="code">Code</option>
            </select>
        </div>
        <div class="gdrive-filter-section">
            <label class="gdrive-filter-label">Size</label>
            <select class="gdrive-filter-select" id="sizeFilter">
                <option value="">Any size</option>
                <option value="small">Small (< 1 MB)</option>
                <option value="medium">Medium (1-10 MB)</option>
                <option value="large">Large (10-100 MB)</option>
                <option value="huge">Huge (> 100 MB)</option>
            </select>
        </div>
        <div class="gdrive-filter-section">
            <label class="gdrive-filter-label">Modified</label>
            <select class="gdrive-filter-select" id="dateFilter">
                <option value="">Any time</option>
                <option value="today">Today</option>
                <option value="week">This week</option>
                <option value="month">This month</option>
                <option value="year">This year</option>
            </select>
        </div>
        <div class="gdrive-filter-actions">
            <button class="gdrive-btn-secondary" id="clearFiltersBtn">Clear</button>
            <button class="gdrive-btn-primary" id="applyFiltersBtn">Apply</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/static/js/simple.js?v=20250720"></script>
    <script src="/static/js/explorer.js?v=20250720"></script>
    <script src="/static/js/windows-explorer.js?v=20250720"></script>
    <script src="/static/js/gdrive-manager.js?v=20250720"></script>
    <script src="/static/js/gdrive-integration.js?v=20250720"></script>
    <script src="/static/js/test-buttons.js?v=20250720"></script>
</body>
</html>
