<!-- TeleDrive File Display Component -->
<div class="gdrive-files-container">
    <!-- Toolbar with breadcrumbs and actions -->
    <div class="gdrive-toolbar">
        <!-- Breadcrumbs -->
        <div class="gdrive-breadcrumbs">
            <div class="gdrive-breadcrumb-item">
                <a href="/">Trang chủ</a>
            </div>
            {% for item in breadcrumbs %}
                <div class="gdrive-breadcrumb-separator">
                    <i class="fas fa-chevron-right"></i>
                </div>
                {% if loop.last %}
                    <div class="gdrive-breadcrumb-item current">{{ item.name }}</div>
                {% else %}
                    <div class="gdrive-breadcrumb-item">
                        <a href="{{ item.path }}">{{ item.name }}</a>
                    </div>
                {% endif %}
            {% endfor %}
        </div>
        
        <!-- Actions -->
        <div class="gdrive-actions">
            <!-- View toggle buttons -->
            <div class="view-toggle">
                <button class="view-toggle-btn active" id="gridViewBtn" title="Xem dạng lưới">
                    <i class="fas fa-th-large"></i>
                </button>
                <button class="view-toggle-btn" id="listViewBtn" title="Xem dạng danh sách">
                    <i class="fas fa-list"></i>
                </button>
            </div>
            
            <!-- Info button -->
            <button class="header-action-btn" id="infoButton" title="Chi tiết">
                <i class="fas fa-info-circle"></i>
            </button>
        </div>
    </div>
    
    <!-- Files display area - Grid View -->
    <div class="gdrive-files-display gdrive-grid-view" id="gridView">
        <!-- Example folders -->
        <div class="gdrive-file-card">
            <div class="gdrive-file-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-file-thumbnail">
                <i class="fas fa-folder fa-3x"></i>
            </div>
            <div class="gdrive-file-info">
                <div class="gdrive-file-name" title="Tài liệu cá nhân">Tài liệu cá nhân</div>
                <div class="gdrive-file-meta">
                    <span class="gdrive-file-modified">12/05/2023</span>
                </div>
            </div>
            <div class="gdrive-file-actions">
                <button class="gdrive-action-btn" title="Thêm tùy chọn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
        
        <div class="gdrive-file-card">
            <div class="gdrive-file-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-file-thumbnail">
                <i class="fas fa-folder fa-3x"></i>
            </div>
            <div class="gdrive-file-info">
                <div class="gdrive-file-name" title="Dự án">Dự án</div>
                <div class="gdrive-file-meta">
                    <span class="gdrive-file-modified">20/04/2023</span>
                </div>
            </div>
            <div class="gdrive-file-actions">
                <button class="gdrive-action-btn" title="Thêm tùy chọn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
        
        <!-- Example files -->
        <div class="gdrive-file-card">
            <div class="gdrive-file-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-file-thumbnail">
                <i class="fas fa-file-pdf fa-3x"></i>
            </div>
            <div class="gdrive-file-info">
                <div class="gdrive-file-name" title="Báo cáo tài chính Q2 2023.pdf">Báo cáo tài chính Q2 2023.pdf</div>
                <div class="gdrive-file-meta">
                    <span class="gdrive-file-size">2.4 MB</span>
                </div>
            </div>
            <div class="gdrive-file-actions">
                <button class="gdrive-action-btn" title="Tải xuống">
                    <i class="fas fa-download"></i>
                </button>
                <button class="gdrive-action-btn" title="Thêm tùy chọn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
        
        <div class="gdrive-file-card">
            <div class="gdrive-file-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-file-thumbnail">
                <i class="fas fa-file-word fa-3x"></i>
            </div>
            <div class="gdrive-file-info">
                <div class="gdrive-file-name" title="Kế hoạch dự án.docx">Kế hoạch dự án.docx</div>
                <div class="gdrive-file-meta">
                    <span class="gdrive-file-size">1.2 MB</span>
                </div>
            </div>
            <div class="gdrive-file-actions">
                <button class="gdrive-action-btn" title="Tải xuống">
                    <i class="fas fa-download"></i>
                </button>
                <button class="gdrive-action-btn" title="Thêm tùy chọn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
        
        <div class="gdrive-file-card">
            <div class="gdrive-file-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-file-thumbnail">
                <i class="fas fa-file-excel fa-3x"></i>
            </div>
            <div class="gdrive-file-info">
                <div class="gdrive-file-name" title="Dữ liệu phân tích.xlsx">Dữ liệu phân tích.xlsx</div>
                <div class="gdrive-file-meta">
                    <span class="gdrive-file-size">3.7 MB</span>
                </div>
            </div>
            <div class="gdrive-file-actions">
                <button class="gdrive-action-btn" title="Tải xuống">
                    <i class="fas fa-download"></i>
                </button>
                <button class="gdrive-action-btn" title="Thêm tùy chọn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
        
        <div class="gdrive-file-card">
            <div class="gdrive-file-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-file-thumbnail">
                <i class="fas fa-image fa-3x"></i>
            </div>
            <div class="gdrive-file-info">
                <div class="gdrive-file-name" title="Logo công ty.png">Logo công ty.png</div>
                <div class="gdrive-file-meta">
                    <span class="gdrive-file-size">542 KB</span>
                </div>
            </div>
            <div class="gdrive-file-actions">
                <button class="gdrive-action-btn" title="Tải xuống">
                    <i class="fas fa-download"></i>
                </button>
                <button class="gdrive-action-btn" title="Thêm tùy chọn">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Files display area - List View -->
    <div class="gdrive-files-display gdrive-list-view" id="listView" style="display:none;">
        <!-- Table header -->
        <div class="gdrive-list-header">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox header">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">Tên</div>
            <div class="gdrive-list-cell gdrive-list-owner">Chủ sở hữu</div>
            <div class="gdrive-list-cell gdrive-list-modified">Ngày sửa đổi</div>
            <div class="gdrive-list-cell gdrive-list-size">Kích thước</div>
        </div>
        
        <!-- Example folders -->
        <div class="gdrive-list-item">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">
                <i class="fas fa-folder"></i>
                <span>Tài liệu cá nhân</span>
            </div>
            <div class="gdrive-list-cell gdrive-list-owner">Bạn</div>
            <div class="gdrive-list-cell gdrive-list-modified">12/05/2023</div>
            <div class="gdrive-list-cell gdrive-list-size">--</div>
        </div>
        
        <div class="gdrive-list-item">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">
                <i class="fas fa-folder"></i>
                <span>Dự án</span>
            </div>
            <div class="gdrive-list-cell gdrive-list-owner">Bạn</div>
            <div class="gdrive-list-cell gdrive-list-modified">20/04/2023</div>
            <div class="gdrive-list-cell gdrive-list-size">--</div>
        </div>
        
        <!-- Example files -->
        <div class="gdrive-list-item">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">
                <i class="fas fa-file-pdf"></i>
                <span>Báo cáo tài chính Q2 2023.pdf</span>
            </div>
            <div class="gdrive-list-cell gdrive-list-owner">Bạn</div>
            <div class="gdrive-list-cell gdrive-list-modified">10/06/2023</div>
            <div class="gdrive-list-cell gdrive-list-size">2.4 MB</div>
        </div>
        
        <div class="gdrive-list-item">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">
                <i class="fas fa-file-word"></i>
                <span>Kế hoạch dự án.docx</span>
            </div>
            <div class="gdrive-list-cell gdrive-list-owner">Bạn</div>
            <div class="gdrive-list-cell gdrive-list-modified">15/05/2023</div>
            <div class="gdrive-list-cell gdrive-list-size">1.2 MB</div>
        </div>
        
        <div class="gdrive-list-item">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">
                <i class="fas fa-file-excel"></i>
                <span>Dữ liệu phân tích.xlsx</span>
            </div>
            <div class="gdrive-list-cell gdrive-list-owner">Bạn</div>
            <div class="gdrive-list-cell gdrive-list-modified">05/06/2023</div>
            <div class="gdrive-list-cell gdrive-list-size">3.7 MB</div>
        </div>
        
        <div class="gdrive-list-item">
            <div class="gdrive-list-cell gdrive-list-select">
                <div class="select-checkbox">
                    <i class="fas fa-check"></i>
                </div>
            </div>
            <div class="gdrive-list-cell gdrive-list-name">
                <i class="fas fa-image"></i>
                <span>Logo công ty.png</span>
            </div>
            <div class="gdrive-list-cell gdrive-list-owner">Bạn</div>
            <div class="gdrive-list-cell gdrive-list-modified">01/06/2023</div>
            <div class="gdrive-list-cell gdrive-list-size">542 KB</div>
        </div>
    </div>
</div>

<style>
    /* File display container */
    .gdrive-files-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        height: 100%;
    }
    
    /* Grid view styles */
    .gdrive-grid-view {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        grid-gap: 16px;
        padding: 16px;
        overflow-y: auto;
    }
    
    /* List view styles */
    .gdrive-list-view {
        display: flex;
        flex-direction: column;
        padding: 0;
        overflow-y: auto;
    }
    
    .gdrive-list-header {
        display: flex;
        height: 48px;
        padding: 0 16px;
        border-bottom: 1px solid var(--gdrive-border);
        background-color: var(--gdrive-white);
        position: sticky;
        top: 0;
        z-index: 2;
    }
    
    .gdrive-list-item {
        display: flex;
        height: 48px;
        padding: 0 16px;
        border-bottom: 1px solid var(--gdrive-border);
        cursor: pointer;
        transition: background-color 0.2s ease;
    }
    
    .gdrive-list-item:hover {
        background-color: var(--gdrive-light-gray);
    }
    
    .gdrive-list-cell {
        display: flex;
        align-items: center;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }
    
    .gdrive-list-select {
        width: 40px;
        flex-shrink: 0;
    }
    
    .gdrive-list-name {
        flex: 1;
        min-width: 200px;
    }
    
    .gdrive-list-name i {
        margin-right: 12px;
        color: var(--gdrive-text-secondary);
        width: 20px;
    }
    
    .gdrive-list-name i.fa-folder {
        color: var(--gdrive-yellow-folder);
    }
    
    .gdrive-list-owner {
        width: 120px;
        color: var(--gdrive-text-secondary);
    }
    
    .gdrive-list-modified {
        width: 120px;
        color: var(--gdrive-text-secondary);
    }
    
    .gdrive-list-size {
        width: 100px;
        color: var(--gdrive-text-secondary);
    }
    
    /* Context menu styles */
    .gdrive-context-menu {
        position: fixed;
        width: 200px;
        background-color: var(--gdrive-white);
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.15);
        z-index: 1000;
        overflow: hidden;
        display: none;
    }
    
    .gdrive-context-item {
        display: flex;
        align-items: center;
        height: 36px;
        padding: 0 16px;
        font-size: 14px;
        color: var(--gdrive-text);
        cursor: pointer;
    }
    
    .gdrive-context-item:hover {
        background-color: var(--gdrive-light-gray);
    }
    
    .gdrive-context-item i {
        margin-right: 12px;
        font-size: 16px;
        color: var(--gdrive-text-secondary);
        width: 20px;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // View toggle functionality
        const gridViewBtn = document.getElementById('gridViewBtn');
        const listViewBtn = document.getElementById('listViewBtn');
        const gridView = document.getElementById('gridView');
        const listView = document.getElementById('listView');
        
        if (gridViewBtn && listViewBtn && gridView && listView) {
            gridViewBtn.addEventListener('click', function() {
                gridView.style.display = 'grid';
                listView.style.display = 'none';
                gridViewBtn.classList.add('active');
                listViewBtn.classList.remove('active');
            });
            
            listViewBtn.addEventListener('click', function() {
                gridView.style.display = 'none';
                listView.style.display = 'flex';
                gridViewBtn.classList.remove('active');
                listViewBtn.classList.add('active');
            });
        }
        
        // File selection functionality
        const fileCards = document.querySelectorAll('.gdrive-file-card');
        fileCards.forEach(card => {
            card.addEventListener('click', function(e) {
                // Don't select when clicking on action buttons
                if (!e.target.closest('.gdrive-file-actions')) {
                    this.classList.toggle('selected');
                    const checkbox = this.querySelector('.select-checkbox');
                    if (checkbox) {
                        checkbox.classList.toggle('active');
                    }
                }
            });
        });
        
        const listItems = document.querySelectorAll('.gdrive-list-item');
        listItems.forEach(item => {
            item.addEventListener('click', function(e) {
                this.classList.toggle('selected');
                const checkbox = this.querySelector('.select-checkbox');
                if (checkbox) {
                    checkbox.classList.toggle('active');
                }
            });
        });
        
        // Context menu functionality
        const contextMenu = document.createElement('div');
        contextMenu.className = 'gdrive-context-menu';
        contextMenu.innerHTML = `
            <div class="gdrive-context-item"><i class="fas fa-eye"></i>Xem</div>
            <div class="gdrive-context-item"><i class="fas fa-download"></i>Tải xuống</div>
            <div class="gdrive-context-item"><i class="fas fa-share"></i>Chia sẻ</div>
            <div class="gdrive-context-item"><i class="fas fa-copy"></i>Tạo bản sao</div>
            <div class="gdrive-context-item"><i class="fas fa-trash"></i>Xóa</div>
        `;
        document.body.appendChild(contextMenu);
        
        // Show context menu on right click
        const fileElements = document.querySelectorAll('.gdrive-file-card, .gdrive-list-item');
        fileElements.forEach(element => {
            element.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                
                // Position menu
                contextMenu.style.left = e.pageX + 'px';
                contextMenu.style.top = e.pageY + 'px';
                
                // Show menu
                contextMenu.style.display = 'block';
                
                // Select the file
                this.classList.add('selected');
                
                // Hide menu when clicking elsewhere
                const hideMenu = function() {
                    contextMenu.style.display = 'none';
                    document.removeEventListener('click', hideMenu);
                };
                
                setTimeout(() => {
                    document.addEventListener('click', hideMenu);
                }, 0);
            });
        });
    });
</script> 